## 2.2.1 HTTP Overview

### HyperText Transfer Protocol (HTTP)
- **Definition**: HTTP is the Web’s application-layer protocol.
### HTTP Versions
- **HTTP/1.0**: Original version from the early 1990s, defined
- **HTTP/1.1**: Majority of transactions as of 2020 occur over this version
- **HTTP/2**: Newer version introduced, published in 2015
- **HTTP/3**: Proposed successor to HTTP/2, utilizing QUIC instead of TCP for transport
### Adoption and Support
- **HTTP/2 Adoption**: Used by more than 45% of websites, supported by almost all web browsers (96% of users).
- **HTTP/3 Adoption**: Used by more than 20% of websites, supported by many web browsers (73% of users).


## 2.2.2 Web Page Objects
*Object*: A file, such as HTML, JPEG, JavaScript, CSS, or video clip, addressable by a single URL within a web page.
### Composition of Web Pages
- Most web pages consist of a base HTML file and several referenced objects.
- Each object, including the base HTML file, is addressable by a unique URL.
- Example: A web page with HTML text and five JPEG images contains six objects.
### Structure of URLs
- Each URL consists of two components: the hostname of the server and the object's path name.

## 2.2.3 Web Browser and Server Interaction

### Client-Side and Server-Side Roles
- **Browser/Client**: Refers to the user's web browser, which implements the client side of HTTP.
- **Web Servers**: Implement the server side of HTTP, hosting web objects addressable by URLs.
### HTTP Communication Process
- HTTP defines how clients request web pages from servers and how servers transfer pages to clients.
- When a user requests a web page, the browser sends HTTP request messages for the page's objects to the server.
- The server responds with HTTP response messages containing the requested objects.
### Transport Protocol: TCP
- HTTP 1.0, 1.1, and 2.0 utilize TCP as the underlying transport protocol, not UDP.
- The HTTP client initiates a TCP connection with the server to exchange data.
- Both client and server processes access TCP through socket interfaces.

### Reliable Data Transfer
- TCP ensures reliable data transfer between client and server.
- HTTP does not handle lost data or TCP recovery mechanisms; these are managed by TCP and lower layers of the protocol stack.

## 2.2.4 Stateless Nature of HTTP
### Lack of Server State
- The server sends requested files to clients without storing any state information about the client.
- If a client requests the same object twice within a short period, the server resends the object without acknowledgment.

### Stateless Protocol
- HTTP is termed a stateless protocol due to the absence of server memory regarding client interactions.

## 2.2.5 Client-Server Interaction with TCP
### Non-Persistent Connections
- **TCP Connection Decision**: 
  - *Non-persistent connections*: Each request/response pair is sent over a separate TCP connection.
- **Steps for Web Page Transfer**:
  1. Client initiates TCP connection to server on port 80.
  2. Client sends HTTP request message including the path name.
  3. Server receives request, retrieves object, encapsulates it in an HTTP response, and sends it back.
  4. Server tells TCP to close the connection after ensuring client receives the response.
  5. Client receives response, TCP connection terminates.
  6. Steps 1-4 repeat for each referenced object.
### Persistent Connections
- **TCP Connection Management**:
  - *Persistent connections*: Server leaves TCP connection open after sending a response.
- **Benefits**:
  - Multiple requests/responses can be sent over the same connection.
  - Reduces burden on the server by avoiding the need to establish new connections for each object.
- **Features**:
  - Pipelining: Requests for objects can be made back-to-back without waiting for replies to pending requests.
  - Connection closure: Server typically closes a connection after a configurable timeout interval when not in use.
  
![[Screenshot 2024-03-17 at 18.46.38.png]]


## 2.2.6 Round-Trip Time (RTT)

*Round-Trip Time (RTT)*: The time it takes for a small packet to travel from client to server and then back to the client. This includes packet-propagation delays, packet-queuing delays in intermediate routers and switches, and packet-processing delays.

### Hyperlink Click Scenario
#### Three-Way Handshake
- **TCP Connection Establishment**: 
  - The browser initiates a TCP connection between the browser and the Web server.
  - Involves a “three-way handshake”:
    - Client sends a small TCP segment to the server.
    - Server acknowledges and responds with a small TCP segment.
    - Client acknowledges back to the server.
  - The first two parts of the three-way handshake take one RTT.

#### HTTP Request/Response
- **Sending Request and Response**:
  - After completing the first two parts of the handshake, the client sends the HTTP request message combined with the third part of the three-way handshake (the acknowledgment) into the TCP connection.
  - Once the request message arrives at the server, the server sends the HTML file into the TCP connection.
  - This HTTP request/response consumes another RTT.
- **Total Response Time Calculation**:
  - Roughly, the total response time is two RTTs plus the transmission time at the server of the HTML file.
  
![[Screenshot 2024-03-17 at 18.50.38.png]]
### Impact of Connection Persistence on File Downloads
- **Non-Persistent Connections**: 
  - HTTP protocol requires two complete RTTs for each file download.
  - For example, downloading 5 files would require 2x5=10 RTTs.
- **Persistent Connections**:
  - Requires 1 RTT to set up the initial TCP connection and then 1 RTT for each file download.
  - For example, downloading 5 files would require 1+5=6 RTTs.
## 2.2.7 HTTP Pipelining
*HTTP Pipelining*: A feature of HTTP/1.1 allowing multiple HTTP requests to be sent over a single TCP connection without waiting for corresponding responses.

### HTTP/1.1 Specification
- HTTP/1.1 requires servers to respond to pipelined requests correctly.
- Servers must send back non-pipelined but valid responses even if the server does not support HTTP pipelining.
### Legacy Support Issues
- Many legacy HTTP/1.1 servers do not support pipelining correctly.
- This lack of support forces most HTTP clients to refrain from using HTTP pipelining in practice.
### Superseding Technology
- HTTP/2 introduced multiplexing, superseding HTTP pipelining.
- Multiplexing via HTTP/2 is supported by most modern browsers.

![[Screenshot 2024-03-17 at 18.52.13.png]]

## 2.2.8 HTTP Request Message Structure
### Request Line
- **Request Line Definition**: The first line of an HTTP request message containing three fields.
  - *Method Field*: Specifies the action to be performed on the resource.
    - **GET Method**: Most commonly used for requesting an object identified in the URL field.
    - *URL Field*: Specifies the location of the requested object.
    - *HTTP Version Field*: Indicates the version of HTTP being used.
### Header Lines
- **Header Lines Definition**: Subsequent lines in an HTTP request message providing additional information.
  - *Host Header Line*: Specifies the host where the requested object resides.
    - *Purpose*: Required for Web proxy caches, even though a TCP connection is established.
  - *Connection Header Line*: Informs the server about the desired connection behaviour.
    - *Connection:close*: Requests the server to close the connection after sending the requested object.
  - *User-agent Header Line*: Specifies the type of browser making the request.
    - *Purpose*: Allows the server to send different versions of the object based on the user agent.
  - *Accept-language Header Line*: Indicates the preferred language for the response.
    - *Purpose*: Requests a specific language version if available; otherwise, accepts the default version.
    - *Content Negotiation*: Refers to the process of selecting the best representation for a given response.
### Entity Body
- **Entity Body Definition**: The body of an HTTP request message.
  - *Empty with GET Method*: In the example, no entity body is included since the GET method is used.
  - *Used with POST Method*: Unlike GET, the entity body is utilised with the POST method for sending data to the server.

![[Screenshot 2024-03-17 at 18.56.20.png]]


## 2.2.9 HTTP Methods Explained
### GET Method
- *GET method*: Used for browser requests where the requested object is identified in the URL field.
- Example: When a user requests a webpage directly via URL.
### POST Method
- *POST method*: Employed when a user submits a form, with the form data sent in the entity body of the HTTP request.
- Example: When a user inputs search terms into a search engine form.
### Form Submission
- HTML forms often use the **GET method** where inputted data is included in the requested URL.
- Example: Form inputs "monkeys" and "bananas" are included in the URL structure like www.somesite.com/animalsearch?monkeys&bananas.
### HEAD Method
- *HEAD method*: Similar to GET, but the server's response excludes the requested object.
- Often used for debugging purposes by application developers.
### PUT Method
- *PUT method*: Used with Web publishing tools to upload an object to a specific path on a Web server.
- Also utilised by applications needing to upload objects to servers.
### DELETE Method
- *DELETE method:* Allows users or applications to remove an object from a Web server.

## 2.2.10 Response Message Structure

### Status Line
- *Status Line*: Comprising the protocol version, status code, and status message.
- Example: HTTP/1.1 200 OK (indicating everything is OK and the server is sending the requested object).
### Header Lines
- **Connection**: Informs the client that the server will close the TCP connection after sending the message.
- **Date**: Specifies the time and date of HTTP response creation and transmission by the server.
- **Server**: Identifies the server software generating the response (e.g., Apache Web server).
- **Last-Modified**: Indicates the time and date when the object was last modified or created.
- **Content-Length**: Specifies the byte count of the object being transmitted.
- **Content-Type**: Indicates the type of content in the entity body (e.g., HTML text).

### Entity Body
- **Entity Body**: Contains the requested object itself, constituting the main content of the response message.
- Example: The HTML text or other data being transmitted.

![[Screenshot 2024-03-18 at 14.19.09.png]]

## 2.2.11 Common Status Codes and Phrases
- **200 OK**: Request succeeded, and the information is returned in the response.
- **301 Moved Permanently**: Indicates that the requested object has been permanently moved. The new URL is specified in the Location header of the response message. The client software will automatically retrieve the new URL.
- **400 Bad Request**: A generic error code indicating that the server could not understand the request.
- **404 Not Found**: Indicates that the requested document does not exist on the server.
- **505 HTTP Version Not Supported**: Indicates that the requested HTTP protocol version is not supported by the server.

## 2.2.12 HTTP Server Statelessness and Cookies
### Statelessness of HTTP Servers
- **Stateless Nature**: Simplifies server design and enables high-performance Web servers capable of handling numerous simultaneous TCP connections.
### Cookies
- *Cookie*: enable websites to track users and personalise content.
- **Usage**: Allows sites to identify users for access restriction or personalised content delivery.
### Components of Cookie Technology
1. **Cookie Header Line in HTTP Response Message**
2. **Cookie Header Line in HTTP Request Message**
3. **Cookie File on User's End System**: Managed by the user's browser.
4. **Back-end Database at the Web Site**: Stores and manages cookie-related data.
### User Identification with Cookies
- **User Identification**: Users can provide identification (e.g., name) on their first visit to a site.
- **Subsequent Sessions**: Browser passes a cookie header, identifying the user to the server in subsequent sessions.
- **Creating User Sessions**: Cookies facilitate the creation of user sessions atop stateless HTTP.
### Example: Web-based E-mail Application
- **Functionality**: When a user logs into a Web-based e-mail application (e.g., Hotmail), the browser sends cookie information to the server.
- **Result**: Server can identify the user throughout the session with the application.


![[Screenshot 2024-03-18 at 14.23.00.png]]


## 2.2.13 Web Cache (Proxy Server)

*Web Cache*: Also known as a proxy server, it serves HTTP requests on behalf of an origin Web server.
### Functionality
- **Disk Storage**: Maintains its own disk storage, storing copies of recently requested objects.
- **HTTP Request Handling**: Receives HTTP requests from client browsers and responds accordingly.
### Configuration and Request Handling
1. **Browser Configuration**: Browser can be set to direct all HTTP requests to the Web cache.
2. **Request Processing**:
   - Browser sends an HTTP request for an object to the Web cache.
   - Web cache checks its local storage for the requested object.
   - If found locally, the Web cache returns the object to the browser.
   - If not found, the Web cache establishes a TCP connection to the origin server and requests the object.
### Example Scenario: Request for an Object
- **Object Request**: Browser requests the object http://www.someschool.edu/campus.gif.
- **Processing Steps**:
   1. Browser establishes TCP connection to the Web cache and sends an HTTP request.
   2. Web cache checks for the object locally and returns it if found.
   3. If not found, the Web cache connects to the origin server and requests the object.
   4. Upon receiving the object, the Web cache stores a copy locally and forwards it to the browser.
### Cache as Server and Client
- **Dual Role**: The cache acts as both a server and a client:
   - **Server**: When handling requests from and sending responses to browsers.
   - **Client**: When sending requests to and receiving responses from origin servers.

![[Screenshot 2024-03-18 at 14.24.45.png]]

## 2.2.14 Web Caching Benefits and Mechanisms
### Reasons for Web Cache Deployment
1. **Reduced Response Time**:
   - Significantly reduces response time for client requests, especially if bottleneck bandwidth between client and cache is higher than to the origin server.
   - High-speed connection between client and cache enables rapid object delivery.
2. **Traffic Reduction**:
   - Substantially decreases traffic on an institution's access link to the Internet.
   - Reduces the need for immediate bandwidth upgrades, leading to cost savings.
   - Improves overall Internet performance by reducing web traffic.
### Role of Content Distribution Networks (CDNs)
- CDNs play an increasingly vital role in the Internet by deploying geographically distributed caches.
- Shared CDNs (e.g., Akamai, Limelight) and dedicated CDNs (e.g., Google, Netflix) serve different purposes.
### Conditional GET Mechanism
- **Purpose**: Allows caches to verify the freshness of cached objects, addressing the issue of stale content.
- **Operation**:
   1. Proxy cache sends a request message to the Web server on behalf of the requesting browser.
   2. Web server responds with the requested object, which is forwarded to the browser and cached locally.
   3. When another browser requests the same object via the cache later, the cache performs an up-to-date check using a conditional GET.
   4. If the object has not been modified since the last retrieval, the Web server responds with status 304 (Not Modified), indicating the cached copy is still valid.
   5. The Web server does not include the requested object in the response, minimizing bandwidth usage and response time.
   6. The cache forwards its cached copy to the requesting browser based on the 304 status, improving user experience.

![[Screenshot 2024-03-18 at 14.29.33.png]]

## 2.2.15 HTTP/2
**Primary Goals**: Reduce perceived latency, provide request prioritisation and server push, and efficient compression of HTTP header fields.
### Head of Line (HOL) Blocking
- **Problem**: Sending all objects in a webpage over a single TCP connection leads to delays.
- **Example Scenario**: Web page includes a large video clip and many small objects. A low-to-medium speed bottleneck link causes delays for small objects behind the video clip.
- **HTTP/1.1 Solution**: Browsers use multiple parallel TCP connections to send objects in parallel.
### HTTP/2 Goal: Eliminate Parallel TCP Connections
- **Objective**: Reduce or eliminate the need for parallel TCP connections.
- **Challenge**: Avoid HOL blocking with only one TCP connection for transporting a webpage.
### Solution: Frame Interleaving
- **Approach**: Break messages into small frames and interleave request and response messages on the same TCP connection.
- **Example**: Server receives 2 concurrent requests for a webpage with a video clip and a smaller image. Frame interleaving ensures efficient transmission of both.
### Framing Mechanism in HTTP/2
- **Framing Sub-layer**: Breaks down HTTP messages into frames and interleaves them.
- **Frame Structure**: Each frame contains parts of the HTTP message, like header fields and message body.
- **Binary Encoding**: Enhances efficiency and reduces errors.

### Benefits of Frame Interleaving
- **Decreased Perceived Delay**: Significantly reduces user-perceived delay compared to non-interleaved transmission.
- **Efficient Transmission**: Frames are sent over a single persistent TCP connection, reducing overhead.
### Other HHTP/2 features

*Message Prioritisation*: feature in HTTP/2 that allows developers to customize the relative priority of requests to optimize application performance.
- **Framing Sub-layer**: Organises messages into parallel streams of data destined for the same requestor.
- **Client-side Priority Assignment**: Clients assign weights (1 to 256) to concurrent requests, indicating priority.
- **Higher Priority**: Requests with higher weights are sent first by the server.

*Server push*: is another feature of HTTP/2 that allows servers to send multiple responses for a single client request.
- **HTML Base Page Analysis**: Servers analyze the HTML base page to identify objects needed for rendering the webpage.
- **Implicit Object Identification**: Objects required for rendering are sent to the client before explicit requests are made.
- **Elimination of Latency**: By pushing objects preemptively, server push reduces latency associated with waiting for explicit requests.
# Next up
[[2.3 Electronic mail (email)]]