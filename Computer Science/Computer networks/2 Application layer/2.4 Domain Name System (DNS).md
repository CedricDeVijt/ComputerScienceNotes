## 2.4.1 Host Identification on the Internet
### Hostnames
- **Hostnames**: Mnemonic identifiers for Internet hosts (e.g., www.facebook.com, www.google.com).
### IP Addresses
- *IP addresses*: serve as another identifier for hosts on the Internet.
- **Structure**: Consists of four bytes separated by periods (e.g., 121.7.106.83).
- **Hierarchical Structure**: Each byte, read from left to right, provides more specific information about the host's location within the Internet.
- **Analogy to Postal Address**: Like reading a postal address from bottom to top, scanning an IP address from left to right yields progressively more detailed location information within the Internet.


## 2.4.2 Identifying Hosts: Hostnames vs. IP Addresses
### Hostname vs. IP Address
- **Hostname**: Mnemonic identifier preferred by humans.
- **IP Address**: Fixed-length, hierarchically structured identifier preferred by routers.
### Domain Name System (DNS)
- **Main Task**: Translate hostnames to IP addresses.
- **Components**:
  - Distributed database implemented in a hierarchy of DNS servers.
  - Application-layer protocol enabling hosts to query the distributed database.
- **Implementation**: Often UNIX machines running BIND software.
- **Protocol**: Runs over UDP and uses port 53.
- **Usage**: Employed by various application-layer protocols like HTTP and SMTP to translate hostnames to IP addresses.
- **Impact**: Introduces additional delay to Internet applications.
### DNS Services
- **Host Aliasing**:
  - Canonical hostname may have one or more alias names.
  - DNS can provide canonical hostname and IP address for an alias hostname.
- **Mail Server Aliasing**:
  - Ensures mnemonic email addresses despite complex server hostnames.
  - Allows mail application to obtain canonical hostname and IP address for an alias hostname.
- **Load Distribution**:
  - Distributes traffic among replicated servers.
  - Rotates IP addresses within replies to distribute traffic evenly.
  - Used for both web and email servers.

## 2.4.3 DNS Server Hierarchy

### Overview
- DNS utilises a hierarchical system of servers to manage the translation of hostnames to IP addresses, catering to both human preference for mnemonic hostnames and router preference for fixed-length IP addresses.
### Classes of DNS Servers
- **Root DNS Servers**
  - *Definition*: Servers distributing IP addresses of TLD servers.
  - *Characteristics*:
    - Over 1000 instances globally, duplicating 13 root servers managed by 12 organisations.
    - Coordination through Internet Assigned Numbers Authority (IANA).
  - *Function*: Provide IP addresses of TLD servers.

- **Top-Level Domain (TLD) Servers**
  - *Definition*: Servers managing IP addresses of authoritative DNS servers for specific top-level domains.
  - *Examples*: Managed by companies like Verisign Global Registry Services (for .com) and Educause (for .edu).
  - *Function*: Provide IP addresses of authoritative DNS servers.

- **Authoritative DNS Servers**
  - *Definition*: Servers housing DNS records mapping hostnames to IP addresses for publicly accessible hosts.
  - *Responsibility*: Held by organizations for their publicly accessible hosts.
  - *Implementation*: Can be managed by the organization or outsourced to service providers.
  - *Setup*: Most universities and large companies maintain their own primary and secondary authoritative DNS servers.

![[Screenshot 2024-03-18 at 15.25.30.png]]


## 2.4.5 Local DNS Server in DNS Architecture
### Overview
- The local DNS server, though not strictly part of the hierarchical DNS structure, plays a crucial role in DNS architecture by acting as a proxy for hosts' DNS queries.
### Characteristics
- *Definition*: Each ISP, including residential and institutional ISPs, has a local DNS server, also known as a default name server.
- *Assignment*: Provided to hosts by ISPs, typically through DHCP (Dynamic Host Configuration Protocol).
- *Proximity*: Positioned "close to" the host, often residing within the same LAN for institutional ISPs or separated by a few routers for residential ISPs.
### Functionality
- *Proxy Function*: Acts as an intermediary for DNS queries from hosts, forwarding them into the DNS server hierarchy.
- *Query Handling*: Receives DNS queries from hosts and forwards them to appropriate DNS servers based on hierarchical structure.
### TLD Server Role
- **Mapping Resolution**: TLD servers may not always directly know the authoritative DNS server for a hostname, often knowing only of an intermediate DNS server that holds this information.
## 2.4.6 DNS Caching for Performance Improvement
### Overview
- *DNS caching*: involves storing DNS mappings locally in a DNS server's memory upon receiving DNS replies, facilitating faster responses to subsequent queries for the same mappings.
- **Purpose**: Reduce latency and minimise the number of DNS messages transmitted across the network.
- DNS utilises caching extensively to enhance delay performance and minimise DNS message traffic across the Internet.
### Operation
- *Caching Process*:
  - Upon receiving a DNS reply containing a hostname-to-IP address mapping, the DNS server caches this information in its local memory.
  - Subsequent queries for the same hostname can be quickly resolved using the cached mapping.
- *Non-Authoritative Responses*:
  - DNS servers can provide IP addresses even if they are not authoritative for the hostname, as long as the mapping is cached.
### Management
- *Cache Expiry*:
  - Cached information is not permanent; DNS servers discard cached mappings after a certain period, typically set to two days.
- *Cache Refresh*:
  - DNS servers periodically refresh their caches to ensure they contain up-to-date information.
### Benefits
- *Performance Improvement*: Faster response times for DNS queries due to reduced reliance on upstream servers.
- *Traffic Reduction*: Minimisation of DNS message traffic across the Internet, leading to more efficient network utilisation.

## 2.4.7 Resource Records in DNS

### Overview
- DNS servers store Resource Records (RRs) within the distributed database, including mappings between hostnames and IP addresses. Each DNS reply message carries one or more resource records.
### Resource Record Structure
- A resource record (RR) consists of four fields:
  1. **Name**: Represents the hostname or domain.
  2. **Value**: Indicates the corresponding IP address or canonical hostname.
  3. **Type**: Specifies the type of record (A, NS, CNAME, MX).
  4. **TTL (Time To Live)**: Determines when the resource should be removed from a cache.
### Types of Resource Records
- **Type=A**:
  - *Description*: Maps a hostname to an IP address.
  - *Example*: (relay1.bar.foo.com, 145.37.93.126, A)

- **Type=NS**:
  - *Description*: Specifies authoritative DNS server for a domain.
  - *Example*: (foo.com, dns.foo.com, NS)

- **Type=CNAME**:
  - *Description*: Provides canonical hostname for an alias.
  - *Example*: (foo.com, relay1.bar.foo.com, CNAME)

- **Type=MX**:
  - *Description*: Specifies canonical name of a mail server.
  - *Example*: (foo.com, mail.bar.foo.com, MX)
### DNS Server Authority
- **Authoritative DNS Server**:
  - *Definition*: Contains Type A record for a hostname it is authoritative for.
  - *Cache Presence*: May contain Type A record even if not authoritative.
- **Non-Authoritative Server**:
  - *Definition*: Contains Type NS record for the domain including the hostname.
  - *Additional Record*: Contains Type A record mapping the DNS server's IP address.


## 2.4.8 DNS Message Format

### Overview
- DNS messages consist of two kinds: query and reply messages. Both share the same format.

![[Screenshot 2024-03-18 at 15.34.40.png]]
### Header Section
- **Structure**:
  - The first 12 bytes of the message.
- **Fields**:
  - *Identifier*: 16-bit number identifying the query.
  - *Flags*:
    - *Query/Reply Flag*: 1-bit flag indicating if the message is a query (0) or a reply (1).
    - *Authoritative Flag*: 1-bit flag set in a reply if the server is authoritative for the queried name.
    - *Recursion-Desired Flag*: 1-bit flag set if the client desires DNS server recursion.
    - *Recursion-Available Flag*: 1-bit flag set in a reply if the DNS server supports recursion.
  - *Number-of Fields*: Indicates the count of data sections following the header.
### Question Section
- **Purpose**: Contains details about the query.
- **Fields**:
  - *Name*: Name being queried.
  - *Type*: Type of question being asked (e.g., Type A for host address, Type MX for mail server).
### Answer Section
- **Purpose**: Contains resource records for the queried name.
- **Fields**:
  - *Type*: Type of record (A, NS, CNAME, MX).
  - *Value*: Value associated with the record.
  - *TTL*: Time to live for the record.
### Authority Section
- **Purpose**: Contains records of other authoritative servers.
### Additional Section
- **Purpose**: Contains additional helpful records.
- **Example**:
  - *Answer Field*: Contains resource record providing canonical hostname of a mail server.
  - *Additional Section*: Contains Type A record providing the IP address for the canonical hostname of the mail server.


## 2.4.9 Domain Name Registration and DNS Configuration
### Domain Name Registration
- **Registrar Role**:
  - *Function*: Verifies domain name uniqueness, enters it into the DNS database, and collects fees.
  - *History*: Network Solutions monopolised registration pre-1999; now, multiple registrars accredited by ICANN compete.
### DNS Server Configuration
- **DNS Server Setup**:
  - *Type A Record*: Enter for Web server (www.networkutopia.com).
  - *Type MX Record*: Enter for mail server (mail.networkutopia.com).
- **Traditional Configuration**:
  - *Static Configuration*: DNS server contents managed manually, typically via configuration files.
- **Dynamic Update Option**:
  - *Recent Development*: DNS protocol updated to allow dynamic data addition/deletion via DNS messages.
  - *Specification*: Defined in RFC 2136 and RFC 3007 for DNS dynamic updates.

![[Screenshot 2024-03-18 at 15.37.07.png]]

# Next up
[[2.5 Summery]]