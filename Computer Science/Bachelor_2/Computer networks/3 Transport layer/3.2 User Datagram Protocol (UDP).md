## 3.2.1 UDP Characteristics
### Minimalism
- **RFC 768**: Defines UDP as a minimalist transport protocol.
- **Functionality**: Primarily focuses on multiplexing/demultiplexing and light error checking.
- **Relation to IP**: Adds little to IP; application almost directly communicates with IP if UDP is chosen.
### Operation
- **Data Transmission**: Takes messages from the application, attaches source and destination port numbers, adds minimal fields, and passes to the network layer.
- **Encapsulation**: Network layer encapsulates the segment into an IP datagram for delivery.
- **Segment Delivery**: Uses destination port number to deliver data to the correct application process.
### Connectionless Nature
- **Handshaking**: No handshaking between sending and receiving entities before sending a segment.
- **Connectionless**: UDP is described as connectionless due to the absence of handshaking.
## 3.2.2 Choosing UDP Over TCP
### Application Suitability
- **Control Over Data Transmission**: Allows finer control over data transmission compared to TCP.
- **Real-Time Applications**: Real-time applications benefit from UDP's minimal delay and ability to tolerate some data loss.
### Connection Establishment
- **No Preliminaries**: UDP operates without formal preliminaries like TCP's three-way handshake.
- **DNS Example**: DNS runs over UDP due to the avoidance of connection establishment delay.
### Lack of Connection State
- **Connection State**: UDP does not maintain connection state in end systems like TCP does.
- **Server Scalability**: Servers can support more active clients with UDP due to the absence of connection state tracking.
### Overhead Efficiency
- **Packet Header Overhead**: UDP has smaller header overhead (8 bytes) compared to TCP (20 bytes).
## 3.2.3 Internet Applications and Transport Protocols
### Reasons for UDP Usage:
- **Network Management (SNMP)**: Required during network stress when reliable, congestion-controlled data transfer is difficult.
- **DNS**: Avoids delays associated with TCP's connection establishment.
- **Multimedia Applications**: Can tolerate packet loss; react poorly to TCP's congestion control.
### UDP/TCP Usage in Multimedia Applications:
- **Internet Phone, Video Conferencing, Streaming**: Tolerate small packet loss; react poorly to TCP's congestion control.
- **Streaming Media**: TCP becomes attractive when packet loss rates are low, or UDP traffic is blocked for security reasons.
## 3.2.4 UDP Segment Structure

### Defined in RFC 768
- **Specification**: Defined in RFC 768.
- **Application Data**: Occupies the data field of the UDP segment.
- **Examples**: For DNS, contains query or response messages; for streaming audio, contains audio samples.
### Header Fields
- **Four Fields**: Only four fields, each consisting of two bytes.
  - **Source Port**: Port number of the sender.
  - **Destination Port**: Port number of the receiver.
  - **Length**: Specifies the total length of the UDP segment (header plus data).
  - **Checksum**: Used by the receiving host to check for errors in the segment.
### Purpose of Fields
- **Port Numbers**: Allow destination host to perform demultiplexing to direct data to the correct process.
- **Length Field**: Specifies the number of bytes in the UDP segment, including the header and data.
- **Checksum**: Helps detect errors introduced into the segment during transmission.
### Checksum Calculation
- **Inclusion of IP Header Fields**: Checksum calculation also involves a few fields in the IP header.
- **Verification**: Receiving host checks the checksum to determine if errors are present in the segment.

![[Screenshot 2024-03-21 at 13.08.43.png]]

## 3.2.5 UDP Checksum for Error Detection

### Purpose
- **Error Detection**: UDP checksum detects alterations in the UDP segment during transmission.
### Calculation Process
- **Sender Side**: Performs 1s complement of the sum of all 16-bit words in the segment.
  - **Overflow Handling**: Overflow encountered during sum is wrapped around.
  - **Result**: Result is put in the checksum field of the UDP segment.
### Verification at Receiver
- **Checksum Verification**: All four 16-bit words, including checksum, are added.
  - **No Errors**: If sum is 1111111111111111, no errors introduced.
  - **Error Detection**: If any bit is 0, errors are present in the packet.
### Pseudo Header
- **Combination of IP and UDP Header Fields**: Used for checksum calculation.
  - **Source IP Address**
  - **Destination IP Address**
  - **Protocol Number**: 17 for UDP, prepended with 0 zeroes.
  - **UDP Length**: Total length of the UDP segment, including header fields.
  - **UDP Segment**: Entire UDP segment, excluding checksum.
### Rationale for Checksum
- **Link-Layer Protocol Variability**: Not all link-layer protocols provide error checking.
- **Router Memory Storage**: Bit errors could be introduced when a segment is stored in a router's memory.
- **End-to-End Reliability**: UDP must provide error detection at the transport layer to ensure end-to-end data transfer reliability.
### Error Handling
- **No Recovery Mechanism**: UDP does not include mechanisms to recover from errors.
- **Implementation Variability**: Some implementations discard damaged segments, while others pass them to the application with a warning.

![[Screenshot 2024-03-21 at 13.09.54.png]]
