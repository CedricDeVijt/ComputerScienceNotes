## 14.1 Internet Protocols and Protocol Layers
### Importance of Protocols
- **Transmission Control Protocol (TCP) and Internet Protocol (IP)**: Fundamental protocols in the Internet, collectively known as TCP/IP.
- **Agreement**: Protocols ensure that systems and products can interoperate by defining standardised methods of communication.
### Internet Standards and RFCs
- **Internet Engineering Task Force (IETF)**: Develops Internet standards, documented in requests for comments (RFCs).
- **Evolution**: RFCs started as requests for comments to address network and protocol design issues.
### Protocol Layers
- **Layered Design**: Network protocols and hardware/software are organised into layers, with each layer providing services to the layer above.
- **Service Model**: Each layer offers services by performing actions within the layer and utilizing services from the layer below.
- **Implementation**: Layers can be implemented in software, hardware, or a combination. 
### Protocol Stack
- **Definition**: Collection of protocols across various layers, forming the protocol stack.
- **Internet Protocol Stack**: Consists of five layers: physical, link, network, transport, and application layers.
## 1.4.2 Application Layer Protocols
The application layer serves as the interface for network applications and their respective protocols. Within the Internet's application layer, various protocols enable different functionalities:
### Common Application Layer Protocols:
1. **HTTP (Hypertext Transfer Protocol)**:
   - Function: Facilitates the request and transfer of web documents, enabling the World Wide Web.
2. **SMTP (Simple Mail Transfer Protocol)**:
   - Function: Supports the transmission of email messages between mail servers.
3. **FTP (File Transfer Protocol)**:
   - Function: Allows the transfer of files between two end systems, typically used for large file transfers.
### Domain Name System (DNS):
- **Function**: Translates human-readable domain names into IP addresses (32-bit network addresses).
- **Protocol**: Operates at the application layer, providing a distributed system for domain name resolution.
### Operation:
- **Distributed**: Application-layer protocols are distributed across multiple end systems.
- **Message Exchange**: Communication between applications in different end systems occurs through the exchange of packets, referred to as messages at the application layer.

These protocols play a crucial role in enabling various functionalities and services on the Internet, from web browsing to email communication and file transfers.

## 1.4.3 Transport Layer Protocols
The transport layer of the Internet is responsible for transporting application-layer messages between endpoints. Two key transport protocols used in the Internet are TCP (Transmission Control Protocol) and UDP (User Datagram Protocol), each offering distinct service characteristics:
### TCP (Transmission Control Protocol):
- **Service Type**: Connection-oriented service.
- **Features**:
  - **Guaranteed Delivery**: Ensures reliable delivery of application-layer messages to the destination.
  - **Flow Control**: Matches sender and receiver speeds to prevent overwhelming the recipient.
  - **Segmentation**: Breaks long messages into smaller segments for transmission.
  - **Congestion Control**: Adjusts transmission rate to alleviate network congestion.
### UDP (User Datagram Protocol):
- **Service Type**: Connectionless service.
- **Features**:
  - **No Reliability**: Provides no guarantees regarding message delivery.
  - **No Flow Control**: Does not regulate the rate of data transmission.
  - **No Congestion Control**: Lacks mechanisms to manage network congestion.
### Segment:
- **Definition**: A transport-layer packet used to transport application-layer messages.
- **Usage**: Both TCP and UDP utilize segments for data transmission.

These transport-layer protocols play a vital role in facilitating communication between applications running on different hosts within the Internet. While TCP offers reliable, connection-oriented communication with features like guaranteed delivery and congestion control, UDP provides a lightweight, connectionless service suitable for applications where speed is prioritised over reliability.

## 1.4.4 Network Layer
The network layer of the Internet is responsible for the transportation of network-layer packets, also known as datagrams, from one host to another. Similar to how a postal service handles a letter with a destination address, the network layer receives a transport-layer segment and a destination address from the transport layer in the source host and ensures the delivery of the segment to the transport layer in the destination host.
### IP Protocol:
- **Definition**: The Internet's network layer protocol responsible for defining the fields in the datagram and governing the actions of end systems and routers based on these fields.
- **Uniqueness**: There is only one IP protocol, and all components of the Internet with a network layer must adhere to it.
- **Significance**: IP serves as the fundamental protocol that binds the Internet together, facilitating communication between diverse network devices.
### Routing Protocols:
- **Purpose**: Determine the routes that datagrams take between source and destination hosts.
- **Variety**: The Internet employs numerous routing protocols, each tailored to specific network configurations and requirements.
- **Flexibility**: Network administrators have the freedom to choose and implement routing protocols within their networks based on their needs.
### IP Layer:
- **Simplification**: While the network layer encompasses both the IP protocol and various routing protocols, it is often colloquially referred to as the IP layer.
- **Reflecting IP's Importance**: This naming convention highlights the central role of the IP protocol in orchestrating communication within the Internet.

The network layer forms a crucial component of the Internet's architecture, providing the infrastructure for the efficient and reliable transmission of data across vast networks of interconnected devices.

## 1.4.5 Link Layer
The Internet's network layer plays a crucial role in routing datagrams through a series of routers between the source and destination. However, to physically move a packet from one node to the next along its route, the network layer relies on the services provided by the link layer.
### Coordination between Network Layer and Link Layer:
- **Responsibilities**: 
  - The network layer routes datagrams through routers.
  - The link layer handles the physical delivery of datagrams between adjacent nodes.
- **Handoff Process**:
  - At each node, the network layer passes the datagram down to the link layer for delivery.
  - The link layer delivers the datagram to the next node along the route.
  - At the receiving node, the link layer passes the datagram up to the network layer.
### Link-Layer Protocol Characteristics:
- **Service Variability**:
  - The specific services provided by the link layer depend on the protocol used over the link.
  - Examples include reliable delivery, error detection and correction, and flow control.
- **Protocol Examples**:
  - Ethernet, WiFi, and DOCSIS (used in cable access networks) are examples of link-layer protocols.
  - Each protocol offers distinct features and capabilities tailored to its application domain.
### Handling Datagrams Across Links:
- **Protocol Diversity**:
  - As datagrams traverse multiple links from source to destination, they may encounter different link-layer protocols.
  - For example, a datagram may be transmitted via Ethernet on one link and via PPP on the next link.
- **Impact on Services**:
  - The network layer receives varying services from different link-layer protocols, each catering to the requirements of its respective link.
### Frame Terminology:
- **Definition**:
  - In the context of the link layer, packets of data are referred to as frames.
  - Frames encapsulate datagrams and contain the necessary information for link-layer processing.

The coordination between the network layer and the link layer ensures the efficient and reliable transmission of datagrams across the Internet's network infrastructure, leveraging the diverse capabilities offered by different link-layer protocols.

## 1.4.6  Layered Organization:
- **End Systems vs. Routers/Link-Layer Switches**:
  - End systems (like computers) implement all five layers of the protocol stack, from the application layer down to the physical layer.
  - Routers and link-layer switches, however, typically implement only the bottom layers of the stack: layer 1 and layer 2 for link-layer switches, and layers 1 through 3 for routers.
### Encapsulation:
- **Definition**:
  - Encapsulation involves adding header information at each layer of the protocol stack as data moves down from the higher layers to the lower layers.
  - This process creates a hierarchy of encapsulated units, where each layer adds its own header information to the payload received from the layer above.
### Packet Structure:
- **Header and Payload**:
  - At each layer of the protocol stack, a packet comprises header fields (added by the respective layer) and a payload field.
  - The payload typically consists of the packet generated by the layer above, while the header fields provide necessary control and routing information for processing at each layer.
### Layer-Specific Information:
- **Transport Layer**:
  - Adds transport-layer header information to the application-layer message, forming a transport-layer segment.
  - This header includes details like source and destination ports for the transport layer to manage communication between applications.
- **Network Layer**:
  - Appends network-layer header information, such as source and destination IP addresses, to create a network-layer datagram.
  - This header aids in routing and addressing at the network layer, enabling end-to-end communication across the network.
- **Link Layer**:
  - Adds link-layer header information, including source and destination MAC addresses, to produce a link-layer frame.
  - This header facilitates frame forwarding and delivery at the link layer, ensuring reliable transmission across the local network.
### Role of Encapsulation:
- **Enhanced Communication**:
  - Encapsulation allows for the transmission of data across heterogeneous networks by providing a standardised format for data exchange.
  - Each layer's header information aids in processing and forwarding data at its respective layer, contributing to end-to-end communication.
### Complexity Distribution:
- **Edge vs. Core Complexity**:
  - The Internet architecture concentrates complexity at the edges (end systems), with routers and link-layer switches primarily responsible for forwarding packets based on their header information.
  - End systems handle the complete protocol stack, while intermediate network elements focus on efficiently transporting packets between adjacent nodes.

In summary, encapsulation enables the hierarchical organisation of data within the protocol stack, with each layer adding specific header information to facilitate communication and routing across the network. This layered approach allows for efficient data transmission and routing while distributing complexity across the network elements.