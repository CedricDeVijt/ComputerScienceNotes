## 5.3.1 Network Links: Point-to-Point vs. Broadcast
### Point-to-Point Links
- **Definition**: Link with a single sender at one end and a single receiver at the other.
- **Protocols**: Designed specifically for point-to-point links.
  - Examples: Point-to-Point Protocol (PPP), High-Level Data Link Control (HDLC).
### Broadcast Links
- **Definition**: Link with multiple sending and receiving nodes connected to a single shared broadcast channel.
- **Broadcast Nature**: When any node transmits a frame, the channel broadcasts the frame, and each other node receives a copy.
- **Technologies**: Examples include Ethernet and wireless LANs.
### Multiple Access Problem
- **Central Importance**: Key challenge for the link layer.
- **Coordination**: How to manage access of multiple sending and receiving nodes to a shared broadcast channel.
- **Common Usage**: Broadcast channels prevalent in LANs, which are often geographically concentrated in a single building or campus.
## 5.3.2 Multiple Access Protocols
### Importance and Usage
- **Essential Component**: Used in various network settings including wired, wireless access, and satellite networks.
- **Regulating Transmission**: Nodes utilize multiple access protocols to control their transmission into the shared broadcast channel.
### Collision Scenario
- **Multiple Transmission**: More than two nodes attempt to transmit frames simultaneously.
- **Consequence**: Collisions occur as frames collide at all receivers.
- **Impact**: Frames involved in the collision are lost, wasting bandwidth during the collision interval.
### Coordination Requirement
- **Optimising Channel Usage**: Necessary to coordinate transmissions of active nodes to ensure useful work on the broadcast channel.
- **Responsibility**: Handled by the multiple access protocol.
### Classification of Multiple Access Protocols
- **Three Categories**:
  1. Channel Partitioning Protocols
  2. Random Access Protocols
  3. Taking-Turns Protocols
### Protocol Classification
- **Varied Implementations**: Dozens of protocols implemented across different link-layer technologies.
- **Classification Basis**: Most protocols can be classified into one of the three categories mentioned above.
## 5.3.4 Desirable Characteristics of Multiple Access Protocols
### Ideal Requirements
1. **Individual Throughput**: 
   - When only one node has data to send, it should achieve a throughput of R bps.
2. **Shared Throughput**:
   - When M nodes have data to send, each node should ideally achieve a throughput of R/M bps.
   - This implies an average transmission rate of R/M over a defined interval, rather than an instantaneous rate of R/M at all times.
### Protocol Characteristics
3. **Decentralisation**:
   - No single master node exists, avoiding a single point of failure for the network.
4. **Simplicity**:
   - Cost-effective implementation, requiring simplicity in design and operation.
## 5.3.5 Time-Division Multiplexing (TDM) vs. Frequency-Division Multiplexing (FDM)
### Overview
- **Techniques**: Used to partition a broadcast channel's bandwidth among all nodes sharing the channel.
- **Common Usage**: Divide bandwidth among multiple nodes to facilitate efficient communication.
### Time-Division Multiplexing (TDM)
- **Principle**:
  - Time is divided into frames.
  - Each frame is subdivided into N time slots, one for each node.
- **Operation**:
  - Nodes transmit during their assigned time slots.
- **Advantages**:
  - Eliminates collisions.
  - Fair distribution: Each node gets R/N bps during each frame time.
- **Drawbacks**:
  1. Limited average rate of R/N bps even when a node is alone.
  2. Nodes must wait for their turn, even when they are the sole sender.
### Frequency-Division Multiplexing (FDM)
- **Principle**:
  - Channel's bandwidth divided into different frequencies (each with a bandwidth of R/N).
  - Each frequency assigned to one of the N nodes.
- **Operation**:
  - Creates N smaller channels of R/N bps.
- **Advantages and Drawbacks**:
  - Shares advantages and drawbacks with TDM.
  - Avoids collisions and divides bandwidth fairly among nodes.
  - Limits a node to a bandwidth of R/N even when it's the sole sender. 
  
![[Screenshot 2024-05-02 at 11.55.02.png]]

## 5.3.6 Code Division Multiple Access (CDMA)
### Overview
- **Principle**: Each bit is encoded by multiplying it with a signal (code) changing at a faster rate (chipping rate) than the original data sequence.
- **Objective**: Allow multiple users to share the same communication channel efficiently.
### CDMA Encoding/Decoding
- **Encoding Scenario**:
  - Each data bit (di) is encoded using a CDMA code.
  - CDMA code: Sequence of M values (cm) taking +1 or -1.
  - Each bit slot subdivided into M mini-slots.
  - CDMA code applied to each mini-slot.
- **Mathematical Representation**:
  - Data bit represented as -1 for 0 value for mathematical convenience.
- **Illustration**:
  - For the ith data bit (di):
    - In the mth mini-slot, Zi,m (output of CDMA encoder) equals di multiplied by the mth bit in the assigned CDMA code (cm).
    - Mathematical representation: $Zi,m = d_i * c_m$.
### Operational Details
- **Unit of Time**:
  - Rate at which original data bits reach the CDMA encoder defines the unit of time.
  - Each original data bit requires a one-bit slot time.
- **Mini-Slots**:
  - Each bit slot divided into M mini-slots.
  - M-bit CDMA code used by the sender determines encoding in each mini-slot.
### Practical Implementation
- **M Value**:
  - In the example, M = 8, but in practice, M is much larger.
- **Application**:
  - Used in various communication systems to enable multiple users to share the same channel efficiently.

In a simple world, with no interfering senders, the receiver would receive the encoded bits, $Z_{i,m}$, and recover the original data bit, di, by computing:
				$d_i=\dfrac{\Sigma^M_{m=1}Z_{i,m}\cdot c_m}{M}$

![[Screenshot 2024-05-02 at 12.00.30.png]]

## 5.3.7 CDMA in the Presence of Interference
### Real-World Challenges
- **Interference**: CDMA must function despite interference from other senders using different assigned codes.
- **Objective**: Recover sender's original data bits amidst interference.
### Additive Assumption
- **Principle**: CDMA assumes interfering transmitted bit signals are additive.
- **Example**: 
  - If three senders transmit a 1, and a fourth sender transmits a -1 during the same mini-slot, the received signal is 2 (1 + 1 + 1 - 1 = 2).
### Receiver Operation
- **Encoding by Senders**:
  - Each sender computes encoded transmissions ($Z_{si,m}$) as before.
- **Received Value**:
  - Received value at a receiver during the mth mini-slot of the ith bit slot is the sum of transmitted bits from all N senders during that mini-slot:

		$Z^*_{i,m}=\sum_{s=1}^{N}Z^s_{i,m}$
### Operational Considerations
- **Complexity**: Dealing with interference requires sophisticated signal processing techniques.
- **Robustness**: CDMA systems must be designed to handle various interference scenarios encountered in real-world communication environments.
## 5.3.8 Random Access Protocols
### Overview
- **Class of Protocols**: One of the broad classes of multiple access protocols.
- **Objective**: Facilitate communication in shared channels by allowing nodes to transmit at the full channel rate.
### Operation
- **Transmitting Rate**:
  - Transmitting node always sends at the full rate of the channel (R bps).
- **Collision Handling**:
  - In case of collision, nodes involved repeatedly retransmit their frames until successful transmission.
### Random Retransmission
- **Delay Strategy**:
  - Nodes experiencing collision wait for a random delay before retransmitting their frames.
  - Each node selects an independent random delay.
- **Benefits**:
  - Independent delays increase the chance of a successful transmission.
  - Node with a shorter delay might successfully transmit its frame without collision.
### Practical Implications
- **Collision Resolution**:
  - Random delays help in resolving collisions and reducing the likelihood of repeated collisions.
- **Efficiency**:
  - Enables efficient utilisation of channel bandwidth by minimising collisions and maximising successful transmissions.

## 5.3.9 Slotted ALOHA Protocol
### Overview
- **Description**: One of the simplest random access protocols.
- **Assumptions**:
  - Frames have a fixed length of L bits.
  - Time is divided into slots of size L/R seconds (time to transmit one frame).
  - Nodes begin transmitting frames only at the start of slots.
  - Nodes are synchronised to slot beginnings.
  - Collision detection occurs before slot ends.

![[Screenshot 2024-05-28 at 15.49.55.png]]
### Operation
- **Transmitting Frames**:
  - When a node has a fresh frame, it transmits it at the start of the next slot.
- **Collision Handling**:
  - If no collision, transmission successful.
  - If collision detected:
    - Node retransmits frame in subsequent slots with probability p.
    - Retransmission continues until successful transmission.
### Retransmission Probability
- **Probability p**:
  - Number between 0 and 1.
  - Each node involved in collision tosses a biased coin with probability p.
  - Heads: Retransmit frame.
  - Tails: Skip slot and try again in next slot (probability 1 - p).
- **Independence**:
  - Nodes involved in collision make retransmission decisions independently.
### Practical Implications
- **Efficiency**:
  - Enables efficient channel utilisation by reducing collisions through retransmission.
- **Simple Operation**:
  - Simple protocol design facilitates implementation and deployment in various network environments.
## 5.3.10 Maximum Efficiency of Slotted ALOHA
### Efficiency Concerns
- **Collision Wasted Slots**:
  - Multiple active nodes lead to collisions, wasting slots.
- **Empty Slots**:
  - Some slots remain empty due to probabilistic transmission policy.
### Definition of Efficiency
- **Successful Slots**:
  - Only slots with exactly one transmitting node are successful.
- **Efficiency**:
  - Long-run fraction of successful slots with many active nodes.
### Derivation of Maximum Efficiency
- **Modification**:
  - Each node attempts to transmit with probability p in each slot.
### Maximum Efficiency Calculation
- **Optimisation**:
  - Find p* that maximises the expression for efficiency.
  - Calculate the limit of efficiency as N approaches infinity.
- **Result**:
  - Maximum efficiency: 1/e ≈ 0.37.
### Implications
- **Effective Transmission Rate**:
  - Only 37% of slots do useful work, yielding an effective rate of 0.37R bps.
- **Empty Slots and Collisions**:
  - 37% of slots go empty, while 26% of slots have collisions.

## 5.3.11 Pure ALOHA Protocol
### Transmission Process
- *Frame arrival*: When a network-layer datagram arrives at the sending node, it is transmitted immediately.
- *Collision handling*: If the frame collides, the node retransmits the frame with probability p after completing the transmission of the collided frame.
- *Waiting mechanism*: If not retransmitting immediately, the node waits for a frame transmission time and then either:
  - Transmits with probability p
  - Waits for another frame time with probability 1 - p

![[Screenshot 2024-05-28 at 16.01.16.png]]
## 5.3.12 Maximum Efficiency of Pure ALOHA
### Probability of Successful Transmission
- *Frame transmission time*: Considered as the unit of time.
- *Transmission probability*: The probability a node is transmitting at any given time is p.
- *No overlap requirement*: For successful transmission, no other nodes can start transmitting in the interval [t0 - 1, t0].
  - *Interval probability*: The probability that no other nodes start transmitting in this interval is (1 - p)^(N-1).
- *Full transmission requirement*: No other nodes can start transmitting while the node is transmitting.
  - *Transmission probability*: The probability that no other nodes start transmitting in this interval is also (1 - p)^(N-1).
- *Overall probability*: The probability of successful transmission for a node is p (1 - p)^(2(N-1)).
### Maximum Efficiency Calculation
- *Efficiency comparison*: The maximum efficiency of pure ALOHA is 1/(2e), which is half of the slotted ALOHA efficiency  ±= 0.18.
- *Decentralisation cost*: The reduced efficiency is the cost of having a fully decentralised ALOHA protocol.

## 5.3.13 Node Transmission in ALOHA
### Independent Transmission Decision
- *Independent decision*: Nodes transmit without considering the activity of other nodes.
- *No interference detection*: Nodes do not stop transmitting if another node starts interfering.

## 5.3.15 Collisions in CSMA

### CSMA and CSMA/CD Protocols
- *CSMA*: Carrier Sense Multiple Access
- *CSMA/CD*: Carrier Sense Multiple Access with Collision Detection
### Why Collisions Occur
- *Carrier sensing limitation*: Collisions can still occur due to propagation delays even when nodes perform carrier sensing.
### Space-Time Diagram Explanation
- *Node B transmission*: At time t0, node B senses the channel is idle and begins transmitting.
- *Propagation delay*: B’s bits take time to propagate along the medium.
- *Node D transmission*: At time t1, node D senses the channel is idle (B’s bits haven't reached D yet) and starts transmitting.
- *Collision detection*: Eventually, B’s transmission interferes with D’s transmission at D.
- *Propagation delay effect*: Longer delays increase the chance that a node will not detect another node's transmission in time.

![[Screenshot 2024-05-28 at 16.09.47.png]]

## 5.3.16 Collision Detection Benefits
### Performance Improvement
- *Abort on collision*: Nodes stop transmitting after detecting a collision, preventing the transmission of a damaged frame.
- *Efficiency gain*: This improves protocol performance by reducing the time spent on transmitting useless, collided frames.

## 5.3.17 Random Backoff Time
### Importance of Random Wait Time
- *Random vs. fixed time*: Nodes must wait a random time to avoid repeated collisions if they both wait the same fixed amount of time.
### Choosing Backoff Interval
### Interval Size Considerations
- *Large interval*: With few colliding nodes, a large interval may result in unnecessary idle time.
- *Small interval*: With many colliding nodes, a small interval may cause repeated collisions due to similar random values.
- *Adaptive interval*: The interval should be short when few nodes collide and long when many nodes collide.

### Binary Exponential Backoff Algorithm
### Collision Handling
- *Algorithm usage*: Used in Ethernet and DOCSIS cable network multiple access protocols.
- *Random value selection*: After n collisions, a node chooses K randomly from {0, 1, 2, ..., 2^n - 1}.
- *Increased interval*: More collisions result in a larger interval for random backoff.
### Specifics for Ethernet
- *Wait time calculation*: The wait time is K x 512 bit times (K times the time to send 512 bits).
- *Collision cap*: The maximum value for n is capped at 10.

### New Frame Transmission
### CSMA/CD Algorithm
- *Independent new frames*: Each new frame transmission runs the CSMA/CD algorithm independently of past collisions.
- *Opportunity for success*: A new frame might succeed immediately while other nodes are in backoff states.

## 5.18 Transmission Rate and Efficiency in CSMA/CD
### Single Node Transmission
- *Full channel rate*: When only one node transmits, it can utilize the full channel rate (e.g., 10 Mbps, 100 Mbps, or 1 Gbps in Ethernet).
### Multiple Nodes Transmission
- *Reduced effective rate*: With many nodes transmitting, the effective transmission rate decreases due to collisions and contention.
### Efficiency Definition
- *CSMA/CD efficiency*: Long-run fraction of time frames are transmitted without collisions when many nodes are active with many frames to send.
## 5.3.19 Efficiency Approximation Formula
### Key Variables
- $d_{prop}$: Maximum signal propagation time between any two adapters.
- *$d_{trans}$*: Time to transmit a maximum-size frame (approximately 1.2 ms for a 10 Mbps Ethernet).
### Efficiency Formula
- *Efficiency approximation*: 
  $\operatorname{Efficiency} = \dfrac{1}{1+5\frac{ d_{prop}}{d_{trans}}}$
### Interpretation of Formula
- *$d_{prop}$ approaches 0*: Efficiency approaches 1 because nodes abort immediately without wasting the channel.
- *$d_{trans}$* becomes large: Efficiency approaches 1 as the frame holds the channel for a long time, ensuring productive use of the channel.

## 5.3.20 Collision Detection in Ethernet
### Ethernet Collision Detection
- *Collision detection mechanism*: An Ethernet station listens to the channel while transmitting.
- *Aborting on collision*: If a collision is detected, the station aborts transmission and retries after a random wait.
### Collision Detection in Wi-Fi (802.11)
### Reasons for No Collision Detection
- *Simultaneous send and receive*: Detecting collisions requires the ability to transmit and receive simultaneously, which is costly due to the weak received signal compared to the transmitted signal.
- *Hidden terminal problem*: Even with simultaneous transmission and reception, collisions may not be detected due to hidden terminals and fading.
### Transmission without Collision Detection
- *Complete frame transmission*: Once a station starts transmitting a frame, it completes the transmission regardless of collisions, which can degrade performance.

### Collision Avoidance in Wi-Fi (802.11)
### Collision Avoidance Techniques
#### Frame Transmission Process
1. *Channel idle sensing*:
   - If the channel is idle, the station transmits after a short wait (Distributed Inter-frame Space, DIFS).
2. *Channel busy sensing*:
   - If the channel is busy, the station chooses a random backoff value (using binary exponential backoff) and counts down after DIFS when the channel is idle. The counter freezes when the channel is busy.
3. *Counter reaches zero*:
   - When the counter reaches zero (channel idle), the station transmits the frame and waits for an acknowledgment.
4. *Acknowledgment*:
   - If acknowledgment is received, the frame is correctly received, and the station starts the CSMA/CA protocol at step 2 if it has another frame.
   - If no acknowledgment is received, the station reenters the backoff phase at step 2 with a larger random interval.

### CSMA/CA vs. CSMA/CD
- *Ethernet (CSMA/CD)*: A station transmits immediately when the channel is idle.
- *Wi-Fi (CSMA/CA)*: A station waits and counts down even when the channel is idle before transmitting.

## 5.3.21 Desirable Properties of Multiple Access Protocols
### Properties
1. *Single active node throughput*: The active node has a throughput of R bps.
2. *Multiple active nodes throughput*: Each active node has a throughput of nearly R/M bps.
### ALOHA and CSMA Protocols
- *Property fulfillment*: Have the first property but not the second.

### Taking-Turns Protocols
### Polling Protocol
#### Mechanism
- *Master node*: One node is designated as the master.
- *Polling process*: The master node polls each node in a round-robin fashion, allowing each node to transmit a maximum number of frames.
- *Transmission observation*: The master determines when a node finishes transmitting by observing the lack of signal.
#### Advantages
- *Collision elimination*: Avoids collisions and empty slots, leading to higher efficiency.
#### Drawbacks
- *Polling delay*: Time required to notify a node to transmit reduces the transmission rate when only one node is active.
- *Single point of failure*: If the master node fails, the entire channel becomes inoperative.
#### Example
- *Bluetooth protocol*: An example of a polling protocol.

### Token-Passing Protocol
#### Mechanism
- *Token exchange*: A special-purpose frame (token) is exchanged among nodes in a fixed order.
- *Token handling*: A node holds the token if it has frames to transmit; otherwise, it forwards the token immediately.
- *Frame transmission*: A node transmits up to a maximum number of frames when it holds the token and then passes the token to the next node.
#### Advantages
- *Decentralization*: No master node, making the protocol decentralized.
- *High efficiency*: Efficient frame transmission process.
#### Drawbacks
- *Node failure*: Failure of one node can crash the entire channel.
- *Token loss*: If a node neglects to release the token, a recovery procedure is needed to re-circulate the token.
#### Examples
- *Fiber Distributed Data Interface (FDDI)*: A token-passing protocol.
- *IEEE 802.5 token ring protocol*: Another token-passing protocol.