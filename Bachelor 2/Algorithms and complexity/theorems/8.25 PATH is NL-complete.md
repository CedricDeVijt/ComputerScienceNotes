# Proof that PATH is NL-Complete

## Problem Definitions

- **PATH**: Given a directed graph $G = (V, E)$ and nodes $s, t \in V$, determine if there exists a directed path from $s$ to $t$ in $G$.
- **NL**: The class of languages decidable by a nondeterministic Turing machine (NTM) using $O(\log n)$ space.
- **NL-Complete**: A language $L$ is NL-complete if $L \in \text{NL}$ and every language in NL is log space reducible to $L$.

To prove PATH is NL-complete, we must show:

1. PATH is in NL.
2. PATH is NL-hard, i.e., every language $A \in \text{NL}$ is log space reducible to PATH.

## Proof Idea

PATH is in NL, as a nondeterministic log space Turing machine can guess a path from $s$ to $t$ by exploring nodes in $G$, using $O(\log n)$ space to store the current node and edge information. Thus, we focus on proving PATH is NL-hard.

To show NL-hardness, we reduce any language $A \in \text{NL}$ to PATH in log space. Given an NTM $M$ that decides $A$ and an input string $w$, we construct a directed graph $G$ where:

- Nodes represent configurations of $M$ on $w$.
- Edges represent valid transitions between configurations.
- There is a path from the start configuration $s$ to the accepting configuration $t$ if and only if $M$ accepts $w$.

This reduction ensures that $w \in A$ if and only if $\langle G, s, t \rangle \in \text{PATH}$.

## Formal Proof

Let $A \in \text{NL}$, decided by an NTM $M$ using $O(\log n)$ space on input $w$ of length $n$. We construct a log space transducer that, given $w$, outputs $\langle G, s, t \rangle$, where $G = (V, E)$ is a directed graph, $s$ is the start configuration, and $t$ is the accepting configuration, such that $M$ accepts $w$ if and only if there is a path from $s$ to $t$ in $G$.

### Graph Construction

- **Nodes ($V$)**: Each node is a configuration of $M$ on $w$, consisting of:
  - The state of $M$.
  - The contents of the work tape (length $c \log n$ for some constant $c$).
  - The positions of the input and work tape heads.
    Since $M$ uses $O(\log n)$ space, a configuration can be represented in $O(\log n)$ space.
- **Edges ($E$)**: An edge $(c_1, c_2) \in E$ exists if configuration $c_1$ can yield configuration $c_2$ in one step of $M$, determined by:
  - The state and tape symbols under the heads in $c_1$.
  - $M$'s transition function, which specifies the next state, tape writes, and head movements.
- **Start and Accept Nodes**:
  - $s$: The initial configuration of $M$ on $w$, with the initial state, work tape empty, and heads at starting positions.
  - $t$: The unique accepting configuration, modified so $M$ has exactly one accepting configuration (e.g., by clearing the tape and moving to a designated accept state).

### Correctness of the Reduction

- **If $M$ accepts $w$**: There exists a sequence of configurations from $s$ to $t$ in $M$’s computation, corresponding to a path in $G$ from $s$ to $t$. Thus, $\langle G, s, t \rangle \in \text{PATH}$.
- **If $\langle G, s, t \rangle \in \text{PATH}$**: A path from $s$ to $t$ in $G$ corresponds to a valid computation branch of $M$ from the start to the accepting configuration, so $M$ accepts $w$, and $w \in A$.
- Thus, $w \in A \iff \langle G, s, t \rangle \in \text{PATH}$.

### Log Space Transducer

To ensure the reduction is log space, we describe a transducer that outputs $\langle G, s, t \rangle$ using $O(\log n)$ space:

1. **Output Nodes**:

   - Each configuration is a string of length $O(\log n)$, encoding the state, work tape contents, and head positions.
   - The transducer iterates over all possible strings of length $c \log n$:
     - For each string, it checks if it represents a valid configuration of $M$ on $w$ (e.g., valid state, head positions within bounds).
     - Valid configurations are output as nodes.
     - This requires $O(\log n)$ space to store the current string and perform checks.

2. **Output Edges**:

   - For each pair of configurations $(c_1, c_2)$, the transducer checks if $c_1$ can yield $c_2$ by:
     - Examining $c_1$’s state and tape symbols under the heads.
     - Verifying if $M$'s transition function allows a transition to $c_2$’s state, tape contents, and head positions.
   - If valid, $(c_1, c_2)$ is output as an edge.
   - This requires $O(\log n)$ space to store $c_1$, $c_2$, and transition details.

3. **Output $s$ and $t$**:
   - $s$: Output the initial configuration (fixed based on $w$).
   - $t$: Output the unique accepting configuration (fixed based on $M$).
   - Both are represented in $O(\log n)$ space.

Since all operations (storing configurations, checking transitions, and outputting) use $O(\log n)$ space, the transducer operates in log space.

## Conclusion

Since PATH is in NL (per Example 8.19) and every language in NL is log space reducible to PATH, PATH is NL-hard. Thus, PATH is NL-complete.
