# Proof that $\overline{\text{PATH}} \in \text{NL}$ and $\text{coNL} = \text{NL}$

## Objective

We aim to prove that $\overline{\text{PATH}}$, the complement of the PATH problem, is in NL (nondeterministic log space). Since PATH is NL-complete, this implies that every problem in coNL is also in NL, establishing that $\text{coNL} = \text{NL}$.

## Problem Definition

- **PATH**: Given a directed graph $G = (V, E)$, vertices $s, t \in V$, determine if there exists a path from $s$ to $t$.
- **$\overline{\text{PATH}}$**: Determine if there is _no_ path from $s$ to $t$ in $G$.
- **Goal**: Design an NL algorithm $M$ that accepts when $G$ has no path from $s$ to $t$.

## Proof Strategy

The proof proceeds in two parts:

1. **Main Algorithm**: Construct an NL algorithm $M$ that solves $\overline{\text{PATH}}$ using the number of nodes $c$ reachable from $s$.
2. **Computing $c$**: Develop an NL procedure to compute $c$, the number of nodes reachable from $s$.

## Part 1: NL Algorithm for $\overline{\text{PATH}}$

### Input

- Graph $G = (V, E)$ with $|V| = m$ nodes.
- Vertices $s, t \in V$.
- Integer $c$, the number of nodes reachable from $s$.

### Algorithm Description

The machine $M$ operates in nondeterministic log space as follows:

1. **Iterate Through Nodes**:

   - For each node $u \in V$, nondeterministically guess whether $u$ is reachable from $s$.
   - If guessed reachable, verify by guessing a path of length at most $m$ from $s$ to $u$.
     - If verification fails, the computation branch rejects.
   - If $u = t$ and guessed reachable, the branch rejects.

2. **Count Reachable Nodes**:
   - Maintain a counter for nodes verified to be reachable from $s$.
   - After processing all nodes, check if the counter equals $c$.
     - If not, reject.
     - If yes, accept.

### Intuition

- If $M$ correctly identifies exactly $c$ nodes reachable from $s$ (not including $t$), it confirms that $t$ is not reachable, as all reachable nodes have been accounted for.
- The algorithm uses log space since it only stores a constant number of pointers, counters, and path vertices at any time.

## Part 2: Computing $c$ in NL

### Objective

Compute $c$, the number of nodes reachable from $s$, using a nondeterministic log space procedure where at least one computation branch outputs the correct $c$, and all others reject.

### Definitions

- Let $A_i \subseteq V$ be the set of nodes at distance $i$ or less from $s$ (i.e., reachable via a path of length at most $i$).
- $A_0 = \{s\}$, and $A_i \subseteq A_{i+1}$.
- $A_m$ contains all nodes reachable from $s$, so $c = |A_m|$.
- Let $c_i = |A_i|$, the number of nodes in $A_i$.

### Procedure to Compute $c$

We compute $c = c_m$ by iteratively calculating $c_{i+1}$ from $c_i$ for $i = 0$ to $m-1$, starting with $c_0 = 1$ (since $A_0 = \{s\}$).

#### Subprocedure: Compute $c_{i+1}$ from $c_i$

1. **Outer Loop**:

   - For each node $v \in V$, determine if $v \in A_{i+1}$.
   - Initialize a counter for nodes verified to be in $A_i$.

2. **Inner Loop**:

   - For each node $u \in V$, guess whether $u \in A_i$.
   - If guessed in $A_i$, verify by guessing a path of length at most $i$ from $s$ to $u$.
     - If verification fails, reject.
   - If $u \in A_i$ and $(u, v) \in E$, then $v \in A_{i+1}$.

3. **Validation**:

   - Count nodes verified to be in $A_i$.
   - At the end of the inner loop, if the count does not equal $c_i$, reject (indicating not all $A_i$ nodes were found).
   - If $v$ has not been shown to be in $A_{i+1}$, conclude $v \notin A_{i+1}$.

4. **Update Counter**:
   - Increment the count of nodes in $A_{i+1}$ when $v \in A_{i+1}$.
   - After processing all $v$, set $c_{i+1}$ to the count of nodes in $A_{i+1}$.

#### Iteration

- Repeat the subprocedure for $i = 0$ to $m-1$ to compute $c_1, c_2, \ldots, c_m$.
- The final value $c_m$ is the number of nodes reachable from $s$.

### Space Complexity

- The procedure uses log space for counters, node pointers, and path verification.
- Only one iterationâ€™s data is stored at a time, ensuring log space usage.

## Conclusion

- The algorithm $M$ solves $\overline{\text{PATH}}$ in NL by using $c$ to verify that $t$ is not reachable from $s$.
- The procedure to compute $c$ is also in NL, as it operates within log space constraints.
- Since PATH is NL-complete and $\overline{\text{PATH}} \in \text{NL}$, it follows that $\text{coNL} \subseteq \text{NL}$. As $\text{NL} \subseteq \text{coNL}$ trivially, we conclude $\text{coNL} = \text{NL}$.
