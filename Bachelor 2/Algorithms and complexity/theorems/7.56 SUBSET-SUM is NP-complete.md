## PROOF IDEA

We prove that all languages in NP are polynomial time reducible to SUBSET-SUM by reducing the NP-complete language 3SAT to it. Given a 3CNF-formula $\phi$, we construct an instance of the SUBSET-SUM problem that contains a subcollection summing to the target $t$ if and only if $\phi$ is satisfiable. Call this subcollection $T$.

To achieve this reduction, we find structures of the SUBSET-SUM problem that represent variables and clauses. The SUBSET-SUM problem instance that we construct contains numbers of large magnitude presented in decimal notation. We represent variables by pairs of numbers and clauses by certain positions in the decimal representations of the numbers.

We represent variable $x_i$ by two numbers, $y_i$ and $z_i$. We prove that either $y_i$ or $z_i$ must be in $T$ for each $i$, which establishes the encoding for the truth value of $x_i$ in the satisfying assignment. Each clause position contains a certain value in the target $t$, which imposes a requirement on the subset $T$. We prove that this requirement is the same as the one in the corresponding clause — namely, that one of the literals in that clause is assigned TRUE.

## PROOF

We already know that SUBSET-SUM $\in NP$, so we now show that 3SAT $≤_P$ SUBSET-SUM.

Let $\phi$ be a Boolean formula with variables $x_1, \dots ,x_l$ and clauses $c_1, \dots ,c_k$. The reduction converts $\phi$ to an instance of the SUBSET-SUM problem $⟨S,t⟩$, wherein the elements of $S$ and the number $t$ are the rows in the table, expressed in ordinary decimal notation. The rows above the double line are labeled

$y_1, z_1, y_2, z_2, \dots ,y_l, z_l$ and $g_1, h1, g_2, h_2, \dots ,g_k, h_k$.

and constitute the elements of $S$. The row below the double line is $t$.

Thus, $S$ contains one pair of numbers, $y_i$, $z_i$, for each variable $x_i$ in $\phi$. The decimal representation of these numbers is in two parts, as indicated in the table. The left-hand part comprises a $1$ followed by $l−i$ 0s. The right-hand part contains one digit for each clause, where the digit of $y_i$ in column $c_j$ is $1$ if clause $c_j$ contains literal $x_i$, and the digit of $z_i$ in column $c_j$ is $1$ if clause $c_j$ contains literal $x_i$. Digits not specified to be $1$ are $0$.

The table is partially filled in to illustrate sample clauses, $c_1$, $c_2$, and $c_k$:

$$ (x_1 \lor \overline{x_2} \lor x_3) \land (x_2 \lor x_3 \lor \dots ) \land \dots \land (\overline{x_3} \lor \dots \lor \dots ) $$

Additionally, $S$ contains one pair of numbers, $g_j$ ,$h_j$ , for each clause $c_j$ . These two numbers are equal and consist of a $1$ followed by $k−j$ $0$'s.

Finally, the target number $t$, the bottom row of the table, consists of $l$ $1$'s followed by $k$ $3$'s.

![[Bachelor 2/Algorithms and complexity/images/Pasted image 20250531175549.png]]

Next, we show why this construction works. We demonstrate that $\phi$ is satisfiable iff some subset of $S$ sums to $t$.

Suppose that $\phi$ is satisfiable. We construct a subset of $S$ as follows. We select $y_i$ if $x_i$ is assigned TRUE in the satisfying assignment, and $z_i$ if $x_i$ is assigned FALSE. If we add up what we have selected so far, we obtain a $1$ in each of the first $l$ digits because we have selected either $y_i$ or $z_i$ for each $i$. Furthermore, each of the last $k$ digits is a number between $1$ and $3$ because each clause is satisfied and so contains between $1$ and $3$ true literals. We additionally select enough of the $g$ and $h$ numbers to bring each of the last $k$ digits up to $3$, thus hitting the target.

Suppose that a subset of $S$ sums to $t$. We construct a satisfying assignment to $\phi$ after making several observations. First, all the digits in members of $S$ are either $0$ or $1$. Furthermore, each column in the table describing $S$ contains at most five $1$'s. Hence a “carry” into the next column never occurs when a subset of $S$ is added. To get a $1$ in each of the first $l$ columns, the subset must have either $y_i$ or $z_i$ for each $i$, but not both.

Now we make the satisfying assignment. If the subset contains $y_i$, we assign $x_i$ TRUE; otherwise, we assign it FALSE. This assignment must satisfy $\phi$ because in each of the final $k$ columns, the sum is always $3$. In column $c_j$ , at most $2$ can
come from $g_j$ and $h_j$ , so at least $1$ in this column must come from some $y_i$ or $z_i$ in the subset. If it is $y_i$, then $x_i$ appears in $c_j$ and is assigned TRUE, so $c_j$ is satisfied. If it is $z_i$, then $x_i$ appears in $c_j$ and $x_i$ is assigned FALSE, so $c_j$ is satisfied. Therefore, $\phi$ is satisfied.

Finally, we must be sure that the reduction can be carried out in polynomial time. The table has a size of roughly $(k + l)^2$ and each entry can be easily calculated for any $\phi$ . So the total time is $O(n^2)$ easy stages.

## ALTERNATIVE PROOF

To prove that Subset Sum is NP-complete, we first note that it is in NP: given a set of integers and a target sum $t$, a proposed subset can be verified to sum to $t$ in polynomial time by adding the elements.

To show NP-hardness, we reduce 3SAT (a known NP-complete problem) to Subset Sum in polynomial time. Given a 3SAT instance—a boolean formula $\phi$ in conjunctive normal form with $n$ variables $v_1, \dots, v_n$ and $m$ clauses, each with exactly three literals—we construct a Subset Sum instance $(A, t)$ such that $\phi$ is satisfiable if and only if there is a subset of $A$ summing to $t$.

### Construction

We represent numbers in base 10 with $n + m$ digits, ensuring no carry-over issues (as maximum sums per digit are less than 10). Label the digit positions as follows:

- Positions 0 to $n-1$ (least significant digits): correspond to variables $v_1$ to $v_n$ (position $i-1$ for $v_i$).
- Positions $n$ to $n+m-1$: correspond to clauses $c_1$ to $c_m$ (position $n+j-1$ for $c_j$).

The set $A$ consists of $2n + 2m$ numbers:

- For each variable $v_i$ ($i = 1$ to $n$):
  - $y_i$ (representing $v_i = \text{True}$): $10^{i-1} + \sum 10^{n+j-1}$ over all clauses $c_j$ where $v_i$ appears positively (as $v_i$).
  - $z_i$ (representing $v_i = \text{False}$): $10^{i-1} + \sum 10^{n+j-1}$ over all clauses $c_j$ where $v_i$ appears negatively (as $\neg v_i$).
- For each clause $c_j$ ($j = 1$ to $m$)—these are "slack" numbers to pad clause digit sums:
  - $g_j = 10^{n+j-1}$ (contributes 1 to the $c_j$ digit).
  - $h_j = 2 \times 10^{n+j-1}$ (contributes 2 to the $c_j$ digit).

The target $t = \sum*{k=0}^{n-1} 1 \times 10^k + \sum*{k=n}^{n+m-1} 4 \times 10^k$.

- This means $t$ has digit 1 in each variable position and digit 4 in each clause position.

This construction is polynomial: $O(n + m)$ numbers, each with $O(n + m)$ digits, computed by scanning the formula.

### Why It Works: 3SAT Satisfiable $\implies$ Subset Sum Yes

Suppose $\phi$ has a satisfying assignment. Select the subset as follows:

- For each variable $v_i$: include $y_i$ if $v_i = \text{True}$, or $z_i$ if $v_i = \text{False}$.
  - This contributes exactly 1 to the digit for $v_i$ (since exactly one of $y_i$ or $z_i$ is chosen per variable).
- For each clause $c_j$: let $s$ be the number of true literals in $c_j$ under the assignment ($s \geq 1$ since satisfiable, and $s \leq 3$).
  - The chosen $y_i$/$z_i$ contribute exactly $s$ to the $c_j$ digit (one per satisfying literal).
  - Add slack to reach exactly 4:
    - If $s=1$, include both $g_j$ and $h_j$ (adds 3, total 4).
    - If $s=2$, include $h_j$ (adds 2, total 4).
    - If $s=3$, include $g_j$ (adds 1, total 4).
  - Slack affects only the $c_j$ digit.

No other digits are affected. Maximum per-digit sums (2 for variables, 6 for clauses) are less than 10, so no carry-over. The total sum is exactly $t$.

### Why It Works: Subset Sum Yes $\implies$ 3SAT Satisfiable

Suppose there is a subset summing to $t$. Since no carry-over is possible, the sum must match $t$ digit-by-digit: 1 in each variable position, 4 in each clause position.

- For each variable digit ($v_i$): sum = 1 implies exactly one of $y_i$ or $z_i$ is included (0 if neither, 2 if both). Define the assignment: $v_i = \text{True}$ if $y_i$ included, $\text{False}$ if $z_i$ included.
- For each clause digit ($c_j$): sum = 4. Let $s$ be the contribution from chosen $y_i$/$z_i$ ($s \leq 3$, one per satisfying literal under the assignment above).
  - Slack ($g_j$, $h_j$) can add 0, 1, 2, or 3.
  - To reach exactly 4: $s +$ slack = 4, so $s \geq 1$ (if $s=0$, max is 3 < 4).
  - Thus, each clause has at least one true literal.

The assignment satisfies $\phi$.

### Example

Consider a tiny 3SAT: $\phi = (v_1 \vee \neg v_2 \vee v_3)$ ($n=3$, $m=1$, one clause $c_1$).

Digits: positions 0=$v_1$, 1=$v_2$, 2=$v_3$, 3=$c_1$.

Numbers ($A$):

- $y_1 = 10^0 + 10^3 = 1 + 1000 = 1001$ (positive in $c_1$).
- $z_1 = 10^0 = 1$ (no negative appearance).
- $y_2 = 10^1 = 10$ (no positive).
- $z_2 = 10^1 + 10^3 = 10 + 1000 = 1010$ (negative in $c_1$).
- $y_3 = 10^2 + 10^3 = 100 + 1000 = 1100$ (positive in $c_1$).
- $z_3 = 10^2 = 100$ (no negative).
- $g_1 = 10^3 = 1000$.
- $h_1 = 2 \times 10^3 = 2000$.

Target $t = 1 \times 10^0 + 1 \times 10^1 + 1 \times 10^2 + 4 \times 10^3 = 1 + 10 + 100 + 4000 = 4111$.

A satisfying assignment, e.g., $v_1=\text{True}, v_2=\text{True}, v_3=\text{False}$: $s=1$ (only $v_1$ true in clause).

- Choose $y_1=1001$, $y_2=10$, $z_3=100$; clause digit sum $s=1$ (from $y_1$).
- Add $g_1 + h_1 = 3000$; total clause digit 1+3=4.
- Sum: 1001 + 10 + 100 + 1000 + 2000 = 4111.

If unsatisfiable (impossible here, but suppose), no subset reaches exactly 4111 while matching digits.
